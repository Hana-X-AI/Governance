[pytest]
# pytest Configuration for CodeRabbit Parser Test Suite
# Julia Santos - Testing & QA Specialist

# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Minimum Python version
minversion = 7.4

# Test paths
testpaths = .

# Command line options (always applied)
addopts =
    --verbose
    --strict-markers
    --tb=short
    --disable-warnings

# Custom markers for test categorization
markers =
    unit: Unit tests (fast, isolated)
    integration: Integration tests (may require external dependencies)
    security: Security-focused tests
    solid: SOLID principle tests
    quality: Code quality tests
    exit_codes: Exit code validation tests
    edge_case: Edge case and boundary tests
    slow: Slow-running tests (> 1 second)
    ci: Tests specifically for CI/CD pipeline
    parser_not_implemented: Tests awaiting parser implementation (marked as skip)

# Coverage settings
[coverage:run]
source = .
omit =
    */tests/*
    */test_*.py
    */__pycache__/*
    */venv/*
    */virtualenv/*

[coverage:report]
precision = 2
show_missing = True
skip_covered = False

# Coverage threshold: 85% is the target for production-quality code
# Rationale: Balances thorough testing with practical development velocity
# - Critical paths (parser, security, SOLID validation) require >90% coverage
# - Utility/helper functions may have lower coverage if edge cases are documented
# - Threshold will be incrementally raised to 90% as codebase matures
# Note: CI will fail if coverage drops below this threshold
fail_under = 85

exclude_lines =
    pragma: no cover
    def __repr__
    raise AssertionError
    raise NotImplementedError
    if __name__ == .__main__.:
    if TYPE_CHECKING:
    @abstractmethod

[coverage:html]
directory = htmlcov
