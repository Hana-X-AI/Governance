# Roger Workflow Guide: Step-by-Step
**Based on Real-World Usage Pattern**
**Source**: Claude Code + CodeRabbit Integration Demo
**Date**: 2025-11-10

---

## The Simple Workflow

This is how you'll actually use Roger in your daily development:

### Step 1: Implement Your Feature
**What You Do**:
```bash
# In Claude Code CLI, describe what you want
"Implement phase 7.3: Add Withings smart scale integration"
```

**What Claude Does**:
- Writes the code
- Creates necessary files
- Updates configurations
- Commits changes

---

### Step 2: Run Code Review
**What You Do**:
```bash
# Tell Claude to review with CodeRabbit
"Run CodeRabbit"

# Optional: Let it take time to do thorough review
"Take as long as needed"
```

**What Roger Does**:
- Launches CodeRabbit in background
- Reviews all changes
- Identifies issues
- Categories by severity (P0, P1, P2, P3)

---

### Step 3: Auto-Fix Issues
**What You Do**:
```bash
# Tell Claude to fix what CodeRabbit found
"Fix any issues CodeRabbit found"
```

**What Claude + Roger Do**:
- Read CodeRabbit findings
- Fix critical issues (P0, P1)
- Re-run CodeRabbit to verify
- Repeat until clean
- Show summary

---

### Step 4: Verify and Deploy
**What You See**:
```
‚úÖ Code fixed all critical issues recommended by CodeRabbit
‚úÖ Ready to deploy
```

**What You Do**:
```bash
git push
```

---

## Complete Example Session
```
You: "Implement phase 7.3: Add Withings smart scale integration"

Claude: [Writes code, creates files, commits]
        "I've implemented the Withings smart scale integration..."

You: "Run CodeRabbit. Take as long as needed and fix any issues."

Claude: "I'll run CodeRabbit in the background and fix any issues found..."

        üê∞ Roger: Starting CodeRabbit review...
        üìã Background task started
        ‚è≥ Reviewing changes...

        [CodeRabbit runs in background]

        ‚ö†Ô∏è  Found 5 issues:
            üî¥ P0: Hardcoded API key in withings_client.py:23
            üî¥ P0: Missing error handling in sync_weight_data()
            üü° P1: Type hints missing in 3 functions
            ‚ö´ P2: Function complexity high in process_measurements()
            ‚ö´ P3: Missing docstring in WeightSync class

        üîß Fixing critical issues...

        [Claude makes fixes]

        ‚úÖ Fixed: Moved API key to environment variable
        ‚úÖ Fixed: Added comprehensive error handling
        ‚úÖ Fixed: Added type hints to all functions
        ‚ö° Improved: Refactored process_measurements()
        üìù Added: Complete docstrings

        üê∞ Re-running CodeRabbit to verify...

        ‚úÖ All critical issues resolved
        ‚úÖ Code meets Hana-X standards
        ‚úÖ Ready to deploy

You: "Great! Push it."

Claude: [Pushes to git]
        "Changes pushed successfully."
```

---

## Key Commands

### Basic Workflow
```
"Implement [feature description]"
"Run CodeRabbit"
"Fix any issues"
```

### With Options
```
"Run CodeRabbit in background"
"Take as long as needed to fix all issues"
"Fix only P0 and P1 issues"
"Show me what CodeRabbit found before fixing"
```

### Manual Roger Commands
```bash
# From terminal (outside Claude Code)
roger review --auto-fix          # Review and fix
roger status                     # Check status
roger report                     # View summary
```

---

## What Happens Behind the Scenes

### 1. Claude Code Integration
```mermaid
graph LR
    A[You: Implement feature] --> B[Claude: Write code]
    B --> C[You: Run CodeRabbit]
    C --> D[Roger: Launch CodeRabbit]
    D --> E[CodeRabbit: Review]
    E --> F[Roger: Parse findings]
    F --> G[You: Fix issues]
    G --> H[Claude: Make fixes]
    H --> I[Roger: Verify]
    I --> J[‚úÖ Done]
```

### 2. Background Processing
- CodeRabbit runs in separate process
- You can continue working
- Roger monitors completion
- Notifies when done

### 3. Auto-Fix Loop
```
Review ‚Üí Find Issues ‚Üí Fix ‚Üí Re-Review ‚Üí Still Issues? ‚Üí Fix Again
                                              ‚Üì No Issues
                                          ‚úÖ Done
```

---

## Best Practices

### Do This ‚úÖ
```
1. Let Claude implement the feature first
2. Run CodeRabbit after implementation
3. Let Claude fix the issues automatically
4. Review the fixes Claude made
5. Push when clean
```

### Not This ‚ùå
```
1. Don't run CodeRabbit while writing code
2. Don't manually fix CodeRabbit findings (let Claude do it)
3. Don't skip the review step
4. Don't push with P0/P1 issues unfixed
```

---

## Time Savings

### Traditional Workflow
```
Write code              ‚Üí 2 hours
Manual review           ‚Üí 1 hour
Fix issues              ‚Üí 30 min
Second review           ‚Üí 30 min
Total: 4 hours
```

### With Roger + Claude Code
```
Write code              ‚Üí 2 hours (Claude does it)
"Run CodeRabbit"        ‚Üí 2 min (automated)
"Fix issues"            ‚Üí 5 min (Claude does it)
Verify                  ‚Üí 2 min
Total: ~10 minutes of your time
```

**Savings**: 3+ hours per feature

---

## Common Scenarios

### Scenario 1: Simple Feature
```
You: "Add user email validation"
You: "Run CodeRabbit and fix any issues"
```
**Time**: 5 minutes

### Scenario 2: Complex Feature
```
You: "Implement payment processing with Stripe"
You: "Run CodeRabbit in background, take your time"
[Continue working on something else]
[CodeRabbit finishes]
You: "Fix all critical issues"
```
**Time**: Your work continues uninterrupted

### Scenario 3: Security-Critical
```
You: "Add JWT authentication"
You: "Run CodeRabbit with security focus"
You: "Fix ALL issues, not just critical ones"
```
**Time**: 10 minutes for extra thorough review

### Scenario 4: Pre-Deployment Check
```
You: "Run CodeRabbit on entire project"
[Review findings]
You: "Fix all P0 and P1 issues"
[Verify]
You: "Create deployment checklist"
```
**Time**: 15-20 minutes for full project scan

---

## Integration with Your Workflow

### Morning Routine
```bash
# Check overnight changes
cd /srv/cc/Governance/your-project
git pull
roger status
# Shows any issues from team commits
```

### Before Lunch
```bash
# Review morning's work
roger review --auto-fix
# Catch any issues before break
```

### End of Day
```bash
# Final check before push
roger review
cat DEFECT-LOG.md
# Ensure nothing blocking for tomorrow
```

### Before PR
```bash
# Comprehensive check
roger review --mode security
# Extra scrutiny for pull requests
```

---

## What Gets Logged

### DEFECT-LOG.md Structure
```markdown
# Defect Log - Your Project

## Active Defects

### DEF-2025-11-10-001
**Created**: 2025-11-10 14:23:15
**Priority**: P0
**Status**: Fixed
**File**: src/withings_client.py:23
**Issue**: Hardcoded API key
**Fix**: Moved to WITHINGS_API_KEY environment variable
**Verified**: 2025-11-10 14:25:43

### DEF-2025-11-10-002
**Created**: 2025-11-10 14:23:16
**Priority**: P1
**Status**: Open
**File**: src/sync.py:45
**Issue**: Missing error handling in sync_weight_data()
**Suggested Fix**: Add try-except block with specific exception handling
```

---

## Roger + Claude Code Commands Reference

### Natural Language (in Claude Code)
```
"Run CodeRabbit"
"Fix the issues CodeRabbit found"
"Show me CodeRabbit's findings"
"Run a security scan with CodeRabbit"
"Check code quality"
"Fix all critical issues"
```

### CLI Commands (in terminal)
```bash
roger review                    # Manual review
roger review --auto-fix         # Review + auto-fix
roger status                    # Current status
roger report                    # Summary report
cat DEFECT-LOG.md              # View all defects
```

---

## Troubleshooting

### Issue: CodeRabbit taking too long
```
Solution: It's running in background, keep working
Check: roger status
```

### Issue: Too many false positives
```
Solution: Adjust sensitivity in .coderabbit/config.yaml
Or: Add exceptions in code comments
```

### Issue: Claude didn't fix all issues
```
Reason: May need manual review for complex issues
Action: Review DEFECT-LOG.md and fix manually
Then: Re-run "roger review" to verify
```

---

## Success Indicators

You know Roger is working well when:

‚úÖ Code reviews complete in < 5 minutes
‚úÖ P0/P1 issues caught before push
‚úÖ Team code quality improves over time
‚úÖ Less time in manual code review
‚úÖ Faster onboarding for new developers
‚úÖ Consistent standards across all code

---

## Real Example: From Video Demo

**Context**: AI Fitness Tracker app, Phase 7.3

**Steps Taken**:
1. "Implement phase 7.3: Add Withings smart scale integration"
2. "Run CodeRabbit"
3. "Take as long as needed and fix any issues"

**What Happened**:
- Claude implemented the feature
- Roger launched CodeRabbit in background
- CodeRabbit found multiple issues
- Claude automatically fixed all critical issues
- Code met standards
- Ready to deploy

**Time**: ~2 minutes of user interaction, rest automated

**Result**: Production-ready code with zero manual debugging

---

## Next Steps

1. **Try It**: Start with a small feature
2. **Learn**: Get comfortable with "Run CodeRabbit" workflow
3. **Adopt**: Use on every feature going forward
4. **Share**: Show teammates how much time you save

---

**Remember**: The goal is to write code faster AND better, not to add overhead. If Roger slows you down, we adjust the configuration until it helps, not hinders.

**Philosophy**: Automate the boring stuff (code review), focus on the interesting stuff (building features).

---

**Document Version**: 1.0
**Last Updated**: 2025-11-10
**Based On**: Real-world Claude Code + CodeRabbit usage
**Status**: Ready for team use
