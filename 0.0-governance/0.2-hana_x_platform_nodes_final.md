# Hanaâ€‘X Platform Nodes â€” Capabilities & Status (Draft v4)

> Purpose: concise inventory of server nodes in the Hanaâ€‘X ecosystem, their **capabilities**, **primary responsibilities**, and **status** (Active vs Inâ€‘Progress). Process flows will live in the architecture docs and runbooks â€” **not here**.

**Status legend:** âœ… Activeâ€ƒðŸ› ï¸ Inâ€‘Progressâ€ƒâ¬œ Toâ€‘Beâ€‘Decided (TBD)

---

## Identity, Trust, and Control

### hx-dc-server (192.168.10.200) â€” âœ…
**Role:** Domain Controller & Auth Hub (Samba/LDAP, Kerberos) for `hx.dev.local`.
**Primary responsibilities:** Central user/group management; SSO for Open WebUI and internal apps; policy enforcement.
**Data/Paths:** `/var/lib/samba`, `/etc/samba`.

### hx-ca-server (192.168.10.201) â€” âœ…
**Role:** Internal Certificate Authority (root + issuing). 
**Primary responsibilities:** Issue/renew TLS certs; maintain CRL/OCSP; underpin SSH/service trust.
**Data/Paths:** `/var/ca/{private,certs,crl}`.

### hx-ssl-server (192.168.10.202) â€” âœ…
**Role:** Reverse proxy / TLS termination (Nginx/Traefik).
**Primary responsibilities:** Front all UIs/APIs; enforce HTTPS and mTLS; route to app backends.
**Data/Paths:** `/etc/nginx` or `/etc/traefik`; certs in `/etc/ssl/hx`.

### hx-control-node (192.168.10.203) â€” âœ…
**Role:** Ansible control plane.
**Primary responsibilities:** Fleet config, idempotent provisioning, secrets via Ansible Vault.
**Data/Paths:** `/srv/ansible/{inventories,roles,playbooks,group_vars}`.

---

## Model Serving and Inference Mesh

### hx-ollama{1,2,3}-server (192.168.10.204â€“206) â€” âœ…
**Role:** Model hosts (Ollama).
**Primary responsibilities:**
- **ollama1 & ollama2:** primary LLM serving nodes (general inference workloads).
- **ollama3:** embeddings host **and** promptâ€‘enhancement model.
**Data/Paths:** `/var/lib/ollama`.
**Notes:** The promptâ€‘enhancement model on **ollama3** bypasses LiteLLM for lowâ€‘latency preprocessing and connects **directly to UIâ€‘layer apps** (e.g., Open WebUI / custom Next.js). Other model traffic continues to route via **hx-litellm-server**.

### hx-litellm-server (192.168.10.212) â€” âœ…
**Role:** Unified API gateway for LLMs & tools.
**Primary responsibilities:** Route to Ollama nodes; broker tool calls (MCP); authN/Z integration.
**Data/Paths:** `/etc/litellm`, logs `/var/log/litellm/`.

---

## Data Plane: Structured, Cache, and Vectors

### hx-postgres-server (192.168.10.209) â€” âœ…
**Role:** System-of-record DB.
**Primary responsibilities:** App state, metadata, audit; WAL archiving.
**Data/Paths:** `/var/lib/postgresql/data` (WAL archive configured).

### hx-redis-server (192.168.10.210) â€” âœ…
**Role:** Redis server with Redis UI.
**Primary responsibilities:** Provide low-latency cache, queues, and rate limiting. Redis UI adds a graphical interface for monitoring and managing data, eliminating the need for CLI-only access.
**Data/Paths:** `/var/lib/redis`.

### hx-qdrant-server (192.168.10.207) â€” âœ…
**Role:** Vector database.
**Primary responsibilities:** Store embeddings, RAG indices; snapshots aligned with Postgres.
**Data/Paths:** `/var/lib/qdrant`.

### hx-qdrant-ui-server (192.168.10.208) â€” âœ…
**Role:** Qdrant Web UI.
**Primary responsibilities:** Graphical interface for managing Qdrant vector databases (self-hosted and cloud). Enables users to view, interact with, and manage vector collections â€” similar to Kibana for Elasticsearch.

### hx-qmcp-server (192.168.10.211) â€” âœ…
**Role:** Qdrant Model Context Protocol (MCP) server.
**Primary responsibilities:** Connect AI agents to the Qdrant vector database, providing persistent, semantic memory by exposing Qdrant's vector search capabilities through the standardized MCP interface.

---

## Agentic + Toolchain

> **Note:** `hx-fastmcp-server` includes a **Brave Search MCP** integration (plugin/internal client) that enables secure web & document search, exposed through FastMCPâ€™s unified interface. Services (MCP + Workers)

### hx-fastmcp-server (192.168.10.213)
**Includes:** Brave Search MCP client for secure, context-aware web search and retrieval exposed through the FastMCP unified server. â€” âœ…
**Role:** Highâ€‘throughput MCP **server + client** (unified entry point).
**Primary responsibilities:** Execute tools at scale; expose standardized MCP endpoints; **compose and proxy** downstream MCP services within a single Python application.

### hx-n8n-mcp-server (192.168.10.214) — ⬜
**Role:** n8n Model Context Protocol (MCP) server.
**Primary responsibilities:** Acts as a bridge that allows LLMs to securely interact with and control n8n workflows through a standardized interface. Enables AI assistants to leverage n8n's visual, low-code automation to perform real-world tasks.
**Status:** NOT OPERATIONAL - Server not deployed/accessible

### hx-n8n-server (192.168.10.215) â€” â¬œ
**Role:** Orchestration/automations (not operational).
**Primary responsibilities:** Intended for job scheduling, CI smoke tests, and notifications.

### hx-docling-mcp-server (192.168.10.217) â€” âœ…
**Role:** Docling MCP endpoint.
**Primary responsibilities:** Expose document parsing and ingestion capabilities to agents.

### hx-docling-server (192.168.10.216) â€” âœ…
**Role:** Docling worker node.
**Primary responsibilities:** Perform internal/external document retrieval, parsing, and conversion.

### hx-crawl4ai-mcp-server (192.168.10.218) â€” âœ…
**Role:** Crawl4AI MCP endpoint.
**Primary responsibilities:** Provide controlled web scraping capabilities through MCP for agents.

### hx-crawl4ai-server (192.168.10.219) â€” âœ…
**Role:** Crawl4AI worker node.
**Primary responsibilities:** Execute web crawling for internal/external sites and corpus gathering.

### hx-literag-server (192.168.10.220) â€” âœ…
**Role:** LightRAG Server.
**Primary responsibilities:** Efficient Retrieval-Augmented Generation (RAG) framework that builds a knowledge graph of relationships between entities and concepts. Employs dual-level retrieval (semantic vector search + knowledge graph context) for comprehensive and relevant answers.

### hx-coderabbit-server (192.168.10.228) â€” âœ…
**Role:** CodeRabbit MCP server.
**Primary responsibilities:** Allow AI agents to interact with the CodeRabbit AI platform and local Git repositories via MCP. Provides tools for AI-assisted code review and development context integration.

### hx-shadcn-server (192.168.10.229) â€” â¬œ
**Role:** Shadcn MCP server.
**Primary responsibilities:** Standalone TypeScript-based server acting as a bridge between AI agents and component registries. Enables structured component discovery and integration.

---

## Application and Userâ€‘Facing Layers (Two Entry Points)

### Entry Point 1 â€” hx-webui-server (192.168.10.227) â€” âœ…
**Role:** Open WebUI for chat/agent UX (behind hx-ssl-server).
**Primary responsibilities:** Provide full MCP tool access; user auth via DC/Kerberos.
**Uses:** LiteLLM; Docling/Crawl4AI via MCP; Qdrant via QMCP.

### Entry Point 2 â€” Custom Next.js Apps (hx-dev â†’ hx-demo) â€” ðŸ› ï¸/ðŸ› ï¸
**hx-dev-server (192.168.10.222)** â€” Build & run containerized Next.js solutions that consume platform services.
**hx-demo-server (192.168.10.223)** â€” Receive promoted containers for stakeholder demos; mirror platform integrations.
**Primary responsibilities (both):** App hosting, API consumption (LiteLLM, LangChain, QMCP), secure ingress via hx-ssl-server.
**Data/Paths:** `/srv/apps/dev` and `/srv/apps/demo` (images/config kept under SCM + registry; exact repo/registry TBD).

### hx-agui-server (192.168.10.221) â€” ðŸ› ï¸
**Role:** Shared dashboards/admin consoles.
**Primary responsibilities:** Ops consoles, admin UIs, internal tooling surfaces.

---

## Integration, Coordination, and Observability

### hx-cc-server (192.168.10.224) â€” âœ…
**Role:** Claude Code systems integrator & knowledge hub.
**Primary responsibilities:** Coordinate agent runs; manage local knowledge.
**Authoritative storage:** `/srv/knowledge/vault` and `/srv/knowledge/vault/agentic-design-patterns-docs-main`.

### hx-metric-server (192.168.10.225) â€” â¬œ
**Role:** Metrics/telemetry (planned; not operational).
**Primary responsibilities:** Centralize logs/metrics; longâ€‘retention storage.

### hx-lang-server (192.168.10.226) â€” ðŸ› ï¸
**Role:** LangChain Server.
**Primary responsibilities:** Host LangChain instance used by apps/agents for chaining.

---

---

## Traceability to Scope Document (Updated Overview)

### Alignment Review
After documenting all server nodes, several refinements are suggested for the **Scope Document**:
1. **Agent Categories** should explicitly reference corresponding server infrastructure from this document (e.g., FastMCP, QMCP, LightRAG, and CodeRabbit MCP servers) for improved traceability.
2. **Governance & Communication Framework** can include a note that infrastructure nodes are aligned to agent categories defined in this platform map.
3. **Implementation Strategy** should highlight that Claude Code (the systems integrator) relies on the active MCP network represented here.
4. **Roles and Responsibilities** in the scope doc can be expanded to identify the nodes (by host) each agent primarily interacts with.

### Updated Traceability Map
- **Frontend/UI â†’** `hx-webui`, `hx-agui`, custom Next.js apps on `hx-dev` â†’ `hx-demo`
- **Backend & Integration Services â†’** `hx-litellm`, `hx-fastmcp` (w/ Brave Search MCP), `hx-n8n*`, `hx-docling*`, `hx-crawl4ai*`, `hx-coderabbit`, `hx-shadcn`, `hx-lang`, `hx-literag`
- **Data & Model Infrastructure â†’** `hx-postgres`, `hx-redis`, `hx-qdrant`, `hx-qmcp`, `hx-ollama*`
- **API Gateway â†’** `hx-litellm`
- **Platform & Infrastructure â†’** `hx-dc`, `hx-ca`, `hx-ssl`, `hx-control`
- **DevOps & Governance â†’** `hx-cc`, `hx-metric`

> The updated scope document should incorporate this mapping in an appendix or reference table to maintain one-to-one traceability between agents and their operational infrastructure.

---

## Appendix A â€” Host File Reference (as of 2025â€‘10â€‘30)

Below is the formatted static hosts file as implemented in the HX infrastructure project. This version preserves domain suffixes, aliases, and comments for traceability. Following the listing is a server count summary.

```
# =====================================================================
# HX Infrastructure Project â€” Static hosts file
# Domain: hx.dev.local
# Generated: 2025â€‘10â€‘21
# =====================================================================

127.0.0.1   localhost
::1         localhost ip6-localhost ip6-loopback
fe00::0     ip6-localnet
ff00::0     ip6-mcastprefix
ff02::1     ip6-allnodes
ff02::2     ip6-allrouters

# --- HX Servers -------------------------------------------------------
192.168.10.200  hx-dc-server.hx.dev.local            hx-dc-server
192.168.10.201  hx-ca-server.hx.dev.local            hx-ca-server
192.168.10.202  hx-ssl-server.hx.dev.local           hx-ssl-server
192.168.10.203  hx-control-node.hx.dev.local         hx-control-node
192.168.10.204  hx-ollama1-server.hx.dev.local       hx-ollama1-server
192.168.10.205  hx-ollama2-server.hx.dev.local       hx-ollama2-server
192.168.10.206  hx-ollama3-server.hx.dev.local       hx-ollama3-server
192.168.10.207  hx-qdrant-server.hx.dev.local        hx-qdrant-server
192.168.10.208  hx-qdrant-ui-server.hx.dev.local     hx-qdrant-ui-server
192.168.10.209  hx-postgres-server.hx.dev.local      hx-postgres-server
192.168.10.210  hx-redis-server.hx.dev.local         hx-redis-server
192.168.10.211  hx-qmcp-server.hx.dev.local          hx-qmcp-server
192.168.10.212  hx-litellm-server.hx.dev.local       hx-litellm-server
192.168.10.213  hx-fastmcp-server.hx.dev.local       hx-fastmcp-server
192.168.10.214  hx-n8n-mcp-server.hx.dev.local       hx-n8n-mcp-server
192.168.10.215  hx-n8n-server.hx.dev.local           hx-n8n-server
192.168.10.216  hx-docling-server.hx.dev.local       hx-docling-server
192.168.10.217  hx-docling-mcp-server.hx.dev.local   hx-docling-mcp-server
192.168.10.218  hx-crawl4ai-mcp-server.hx.dev.local  hx-crawl4ai-mcp-server
192.168.10.219  hx-crawl4ai-server.hx.dev.local      hx-crawl4ai-server
192.168.10.220  hx-literag-server.hx.dev.local       hx-literag-server
192.168.10.221  hx-agui-server.hx.dev.local          hx-agui-server
192.168.10.222  hx-dev-server.hx.dev.local           hx-dev-server
192.168.10.223  hx-demo-server.hx.dev.local          hx-demo-server
192.168.10.224  hx-cc-server.hx.dev.local            hx-cc-server
192.168.10.225  hx-metric-server.hx.dev.local        hx-metric-server
192.168.10.226  hx-lang-server.hx.dev.local          hx-lang-server
192.168.10.227  hx-webui-server.hx.dev.local         hx-webui-server
192.168.10.228  hx-coderabbit-server.hx.dev.local    hx-coderabbit-server
192.168.10.229  hx-shadcn-server.hx.dev.local        hx-shadcn-server
127.0.1.1       hx-control-node.hx.dev.local         hx-control-node
```

### Server Summary
- **Total servers:** 30 active nodes defined in infrastructure
- **Primary categories:**
  - **Identity & Control:** 4 nodes
  - **Model & Inference:** 5 nodes
  - **Data & Storage:** 4 nodes
  - **Agentic & Toolchain:** 9 nodes
  - **Application Layer:** 4 nodes
  - **Integration & Governance:** 4 nodes

> This appendix serves as the authoritative baseline for host mapping and should be updated alongside infrastructure provisioning and scope revisions.

